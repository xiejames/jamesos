function StartHTML5(pageName) {
	if (ChkEl($('#html5test'))) {
		LoadingStart('Loading html 5 test page ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/html5/startup.js",
			css: "apps/html5/style.css"
		},
		function () {
			_html5WinStart(pageName)
		})
	}
}


function AnimateMedusa(a, b, c, d, e, f, g, h) {
	var i = $('#medusaimg');
	var j = $(a);
	var k = j.width();
	var l = j.height();
	var m = j.position().left > b ? j.position().left - b: b - j.position().left;
	var n = j.position().top > c ? c - j.position().top: j.position().top - c;
	var o = m / g;
	var p = n / g;
	var q = 1;
	for (var x = g; x >= 0; x--) {
		var r = (q % 2) === 1;
		i.animate({
			width: r ? '-=' + e: '+=' + e,
			height: r ? '-=' + f: '+=' + f,
			marginLeft: r ? e / 2 : 0,
			marginTop: r ? f / 2 : 0
		},
		d);
		j.animate({
			top: r ? '+=' + p * 3 : '-=' + 0,
			left: r ? '-=' + o * 3 : '+=' + 0
		},
		d);
		q++
	}
}
var mouseDiffY = 0;
var mouseDiffX = 0;
var mouseActiveIcon = 0;
var mouseActiveCloneIcon = 0;
var divName = 'lamp';
var offX = 15;
var offY = 15;
function mouseX(a) {
	if (!a) a = window.event;
	if (a.pageX) return a.pageX;
	else if (a.clientX) return a.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft: document.body.scrollLeft);
	else return 0
}
function mouseY(a) {
	if (!a) a = window.event;
	if (a.pageY) return a.pageY;
	else if (a.clientY) return a.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop: document.body.scrollTop);
	else return 0
}
function follow(a) {
	$('#' + divName).css({
		visibility: 'visible',
		left: (parseInt(mouseX(a)) + offX - 2010) + 'px',
		top: (parseInt(mouseY(a)) + offY - 2010) + 'px'
	})
}
function ScreenSaver() {
	document.onmousemove = null;
	$('#lamp').animate({
		left: '-850px',
		top: '-1500px'
	},
	3000, 'easeInOutBounce', function () {
		$(this).animate({
			left: '-1650px',
			top: '-1500px'
		},
		3000, 'easeInOutElastic', function () {
			ScreenSaver()
		})
	})
}
function LoadCSS(a) {
	var b = document.getElementsByTagName('head')[0];
	$(document.createElement('link')).attr({
		type: 'text/css',
		href: a,
		rel: 'stylesheet',
		media: 'screen'
	}).appendTo(b)
}
function StartManicMiner() {
	$('#startmenu').css('display', 'none');
	CreateElement('manicminer', 'main', '');
	if (!$('#manicminer').children("div").length > 0) {
		LoadingStart('Loading Manic Miner ...<br />Please wait.', 'Loading game ...');
		$('#manicminer').jWindow({
			width: 512,
			height: 385,
			resizable: false,
			theme: 'jwindow',
			minimizable: true
		});
		$('#manicminer div.container').html('<iframe onload=\"ShowElement(\'manicminer\',\'Manic Miner loaded!\',\'Game loaded.\');$(this).focus();\" src=\'apps/games/manicminer/manicminer.html\' width=\'100%\' height=\'100%\'></iframe>')
	}
}
function StartHelp() {
	if (ChkEl($('#experiment'))) {
		LoadingStart('Loading help ...<br />Please wait.', 'Loading ...');
		ensure({
			css: 'apps/exp/bizarewindow/bizare.css'
		},
		function () {
			CreateElement('experiment', 'main', '');
			$('#experiment').load('apps/exp/bizarewindow/bizare.app', function () {
				$('#experiment').resizable({
					onResize: function () {
						if ($('#experiment').position().top <= 35) $('#experiment').css('top', '35px');
						if ($('#experiment').height() > $('#main').height() - 115) $('#experiment').height($('#main').height() - 115)
					}
				});
				$('#windowOne, #windowTwo, .bizwin').css({
					backgroundImage: $('#main').css('background-image'),
					backgroundPosition: $('#main').css('background-position')
				});
				$('#exdrag a.exclose').click(function () {
					$('#exdrag a.exmin').fadeOut();
					$('#experiment').animate({
						left: '+=' + ($('#experiment').width() / 2),
						top: '+=' + ($('#experiment').height() / 2),
						height: 60,
						width: 60,
						opacity: 0
					},
					1000, function () {
						$(this).remove()
					})
				});
				ShowElement('experiment', 'Help loaded!', 'Application loaded')
			})
		})
	}
}
function StartWYSIWYG() {
	if (ChkEl($('#texteditor'))) {
		LoadingStart('Loading text editor ...<br />Please wait.', 'Loading ...');
		CreateElement('texteditor', 'main', 'Text editor');
		$('#texteditor').jWindow({
			width: 800,
			height: 500,
			resizable: true,
			theme: 'jwindow',
			minimizable: true,
			closeConfirm: true
		});
		$('#texteditor div.container').html('<iframe onload=\"ShowElement(\'texteditor\',\'Text editor loaded!\',\'Application loaded.\');$(this).focus();\" src=\'apps/tinymce/examples/full.html\' width=\'100%\' height=\'100%\'></iframe>');
		jQuery("#elm1_parent").css('height', "100%")
	}
}
function StartTabs() {
	if (ChkEl($('#tabstest'))) {
		LoadingStart('Loading tabs test ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/tabs/js/jquery.tabs.js",
			css: ["apps/tabs/css/tabs.css", "apps/tabs/css/icon.css"]
		},
		function () {
			CreateElement('tabstest', 'main', 'Tabs test');
			$('#tabstest').jWindow({
				width: 500,
				height: 447,
				resizable: false,
				theme: 'jwindow',
				minimizable: true,
				closeConfirm: true
			});
			$('#tabstest div.container').load('apps/tabs/tabs.html', function () {
				ShowElement('tabstest', 'Tabs test loaded!', 'Application loaded.');
				$('#tabstest div.container div.tabs-container').tabs()
			})
		})
	}
}
function StartGames() {
	if (ChkEl($('#guishGamesWin'))) {
		LoadingStart('Loading games browser ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/games/startup.js",
			css: "apps/games/games.css"
		},
		function () {
			_gamesWinStart()
		})
	}
}
function StartCoolClock() {
	if (ChkEl($('#wdgClock'))) {
		LoadingStart('Loading coolclock widget ...<br />Please wait.', 'Loading ...');
		ensure({
			js: ["apps/coolclock/coolclock.js","apps/coolclock/excanvas.js","apps/coolclock/moreskins.js", "apps/coolclock/startup.js"],
			css: ["apps/coolclock/coolclock.css", "apps/widgets/style.css"]
		},
		function () {
			_coolclockWinStart()
		})
	}
}
function StartWeatherWidget() {
	if (ChkEl($('#wdgWeather'))) {
		LoadingStart('Loading weather widget ...<br />Please wait.', 'Loading ...');
		ensure({
			js: ["http://www.google.com/jsapi?key=ABQIAAAAAuqJW0mgltvWJDwDFdw4xxSQ9fGo64ghyYiZXTYQSScgk-UWGxQ6vA4b2PJVQa0f3FABqKlO_zpcug", "apps/wdgweather/startup.js"],
			css: ["apps/wdgweather/style.css", "apps/widgets/style.css"]
		},
		function () {
			_weatherWidgetStart()
		})
	}
}
function StartMaps() {
	if (ChkEl($('#guishmaps'))) {
		LoadingStart('Loading maps ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/maps/startup.js",
			css: "apps/maps/style.css"
		},
		function () {
			_guishMapsStart()
		})
	}
}
function StartLinks() {
	if (ChkEl($('#guishlinks'))) {
		LoadingStart('Loading links ...<br />Please wait.', 'Loading ...');
		ensure({
			js: ["apps/links/startup.js", "apps/links/3DEngine.js", "apps/links/Ring.js"],
			css: "apps/links/links.css"
		},
		function () {
			_guishLinksStart()
		})
	}
}
function StartContact() {
	if (ChkEl($('#guishContactWin'))) {
		LoadingStart('Loading contact form ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/contactform/startup.js",
			css: ["apps/contactform/contact.css", "apps/contactform/stylesheet.css"]
		},
		function () {
			_contactWinStart()
		})
	}
}
function StartComments() {
	if (ChkEl($('#guishCommentsWin'))) {
		LoadingStart('Loading comments app ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/comments/startup.js",
			css: "apps/comments/css/general.css"
		},
		function () {
			_commentsWinStart()
		})
	}
}
function StartjQueryEx() {
	if (ChkEl($('#expjQuery'))) {
		LoadingStart('Loading JS/jQuery/HTML experiments ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/exp/jqueryex/startup.js",
			css: "apps/exp/jqueryex/style.css"
		},
		function () {
			_guishjQueryExStart()
		})
	}
}
function StartHxPhysics1() {
	if (ChkEl($('#guishExpHxPhysics1'))) {
		LoadingStart('Loading haxe physics 1<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/exp/haxeex/physics/startup.js"
		},
		function () {
			_guishExpHxPhysics1()
		})
	}
}
function StartUConst() {
	if (ChkEl($('#uconstruct'))) {
		LoadingStart('Loading app<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/underc/startup.js"
		},
		function () {
			_guishUnderCStart()
		})
	}
}
function StartCSVBexp() {
	if (ChkEl($('#csvbexp'))) {
		LoadingStart('Loading c#/VB.NET experiments<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/exp/cvbnetex/guishnes/startup.js"
		},
		function () {
			_guishCSVBStart()
		})
	}
}
function StartProcessing() {
	if (ChkEl($('#processing'))) {
		LoadingStart('Loading processing ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/processing/startup.js"
		},
		function () {
			_guishProcStart()
		})
	}
}
function StartAbout() {
	if (ChkEl($('#guishAboutWin'))) {
		LoadingStart('Loading about window ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/about/startup.js",
			css: "apps/about/style.css"
		},
		function () {
			_aboutWinStart()
		})
	}
}
function StartBookmark() {
	if (ChkEl($('#guishBMarkWin'))) {
		LoadingStart('Loading bookmark window ...<br />Please wait.', 'Loading ...');
		ensure({
			js: ["apps/bookmark/jquery.bookmark.pack.js", "apps/bookmark/startup.js"],
			css: "apps/bookmark/jquery.bookmark.css"
		},
		function () {
			_bmarkWinStart()
		})
	}
}
function _hlwin(a) {
	if (!$('#' + a).is(':visible')) $('#' + a + 'tb').click();
	$.fn.jWindow.HighlightWin($('#' + a), $('#' + a + 'tbcont'))
}
function StartExperiments() {
	if (ChkEl($('#guishExpWin'))) {
		LoadingStart('Loading experiments browser ...<br />Please wait.', 'Loading ...');
		ensure({
			js: ["apps/globalres/tabs/js/jquery.tabs.js", "apps/exp/categories/startup.js"],
			css: ["apps/globalres/tabs/css/tabs.css", "apps/globalres/tabs/css/icons/icon.css"]
		},
		function () {
			_guishExpStart()
		})
	}
}
function StartUnity3D() {
	if (ChkEl($('#guishUnity3DWin'))) {
		LoadingStart('Loading Unity3D stuff ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/globalres/tabs/js/jquery.tabs.js",
			css: ["apps/globalres/tabs/css/tabs.css", "apps/globalres/tabs/css/icons/icon.css"]
		},
		function () {
			CreateElement('guishUnity3DWin', 'main', 'Experiments');
			$('#guishUnity3DWin').jWindow({
				width: 800,
				height: 600,
				resizable: false,
				theme: 'jwindow',
				minimizable: true
			});
			$('#guishUnity3DWin div.container').load('apps/exp/categories/expments.app', function () {
				ShowElement('guishUnity3DWin', 'Unity3D examples loaded!', 'Have fun!');
				$('.tabs-container').tabs()
			})
		})
	}
}
function ChkEl(a) {
	HideStartMenu();
	if (a.children('div').length > 0) _hlwin(a.attr('id'));
	return ! a.children('div').length > 0
}
var index = 1;
function addTab() {
	index++;
	$('#tt').tabs('add', {
		title: 'New Tab ' + index,
		content: 'Tab Body ' + index,
		closable: true
	})
}
function StartAccordion() {
	HideStartMenu();
	if (!$('#accordion').children("div").length > 0) {
		LoadingStart('Loading accordion ...<br />Please wait', 'Loading ...');
		ensure({
			js: "apps/tinyaccordion/packed.js",
			css: "apps/tinyaccordion/style.css"
		},
		function () {
			CreateElement('accordion', 'main', 'About');
			$('#accordion').jWindow({
				resizable: false,
				width: 465,
				height: 'auto',
				theme: 'jwindow',
				minimizable: false
			});
			$('#accordion div.container').load('apps/tinyaccordion/index.app', function () {
				var a = new TINY.accordion.slider("parentAccordion");
				a.init("acc", "h3", 0, 0);
				var b = new TINY.accordion.slider("nestedAccordion");
				b.init("nested", "h3", 1, -1, "acc-selected");
				$('#accordion').find('div.winmask').remove();
				ShowElement('accordion', 'Accordion loaded!', 'Application loaded')
			})
		})
	}
}
function StartWebBrowser() {
	if (ChkEl($('#guishBrowser'))) {
		LoadingStart('Loading web browser ...<br />Please wait.', 'Loading ...');
		ensure({
			js: "apps/webbrowser/startup.js"
		},
		function () {
			CreateElement('guishBrowser', 'main', 'Browse the web');
			_guishWeBStart()
		})
	}
}
function HideStartMenu() {
	$('#startmenu').css('display', 'none')
}
function SetUpDesktop() {
	if (ChkEl($('#settingswin'))) {
		LoadingStart('Loading visual settings ...<br />Please wait', 'Loading ...');
		ensure({
			js: "apps/settings/startup.js"
		},
		function () {
			_guishSetStart()
		})
	}
}
function ShowIEWarning() {
	if (ChkEl($('#iewarning'))) {
		CreateElement('iewarning', 'main', 'IE warning !!!!!');
		$('#iewarning').jWindow({
			resizable: false,
			width: 482,
			height: 280,
			minimizable: false
		});
		$('#iewarning div.container').load('apps/iewarning/iew.app', function () {
			ShowElement('iewarning', '', '')
		})
	}
}
function StartBGColor() {
	if (ChkEl($('#dcolorpicker'))) {
		LoadingStart('Loading desktop color picker ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["js/farbtastic.js", "apps/colpicks/startupd.js"],
			css: "css/farbtastic.css"
		},
		function () {
			_guishDesktopCStart()
		})
	}
}
function StartFontColor() {
	HideStartMenu();
	if (!$('#fcolorpicker').children("div").length > 0) {
		LoadingStart('Loading font color picker ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["js/farbtastic.js", "apps/colpicks/startupf.js"],
			css: "css/farbtastic.css"
		},
		function () {
			_guishFontCStart()
		})
	}
}
function StartSciCalculator() {
	if (ChkEl($('#scicalculator'))) {
		LoadingStart('Loading scientific calculator ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["apps/calculator/jquery.calculator.min.js", "apps/calculator/startup.js"],
			css: "apps/calculator/jquery.calculator.css"
		},
		function () {
			_guishCalSciStart()
		})
	}
}
function StartCalculator() {
	if (ChkEl($('#calculator'))) {
		LoadingStart('Loading calculator ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["apps/calculator/jquery.calculator.min.js", "apps/calculator/startup.js"],
			css: "apps/calculator/jquery.calculator.css"
		},
		function () {
			_guishCalStart()
		})
	}
}
function StartTetris() {
	if (ChkEl($('#tetrisgame'))) {
		LoadingStart('Loading tetris ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["apps/games/tetris/tetris.js", "apps/games/tetris/startup.js"],
			css: "apps/games/tetris/tetris.css"
		},
		function () {
			_guishTetrisStart()
		})
	}
}
function StartSnake() {
	HideStartMenu();
	if (!$('#snakegame').children('div').length > 0) {
		LoadingStart('Loading snake game ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["apps/games/snake/jquery.snake.js", "apps/games/snake/startup.js"],
			css: "apps/games/snake/snake.css"
		},
		function () {
			_guishSnakeStart()
		})
	}
}
function StartGallery() {}
var iconDefaultLeft=20;
var iconDefaultTop=80;
var iconVGap=100;
var iconHGap=100;
var maxIconsPerColumn=5;
function IconsLineUp(a) {
	var b = 0;
	var total=$('div.icon').length;
	if (a === 'left') {
		$('div.icon').each(function (index) {
			//b = $(this).attr('rel').split(',');
			$(this).animate({
				top: iconDefaultTop+Math.floor(index%maxIconsPerColumn)*iconVGap,
				left: iconDefaultLeft+Math.floor(index/maxIconsPerColumn)*iconHGap
			},
			1800)
		})
	} else {
		$('div.icon').each(function (index) {
			$(this).animate({
				top: iconDefaultTop+Math.floor((total+1-index)%maxIconsPerColumn)*iconVGap,
				left: $('#main').width() -iconDefaultLeft+Math.floor((total+1-index)/maxIconsPerColumn)*iconHGap - 280
			},
			1800)
		})
	}
}
function IconsLineUp_default(a) {
	var b = 0;
	if (a === 'left') {
		$('div.icon').each(function () {
			b = $(this).attr('rel').split(',');
			$(this).animate({
				top: b[0],
				left: b[1]
			},
			1800)
		})
	} else {
		$('div.icon').each(function () {
			b = $(this).attr('rel').split(',');
			$(this).animate({
				top: b[0],
				left: $('#main').width() - b[1] - 80
			},
			1800)
		})
	}
}
function StartEyesWidget() {
	HideStartMenu();
	if (ChkEl($('#wdgEyes'))) {
		LoadingStart('Loading eyes widget ...<br />Please wait', 'Loading ...');
		ensure({
			js: ["apps/eyes/jquery.jEye.js", "apps/eyes/startup.js"],
			css: ["apps/eyes/style.css", "apps/widgets/style.css"]
		},
		function () {
			_wdgEyesStart()
		})
	}
}
function StartXeyes() {
	ensure({
		js: "apps/exp/jqueryex/xeyes/startup.js"
	},
	function () {
		StartImWatchingYou()
	})
}
function StartBackground1() {
	LoadingStart('Loading background ...<br />Please wait', 'Loading ...');
	ensure({
		js: "apps/exp/dayandnight/startup.js",
		css: "apps/exp/dayandnight/style.css"
	},
	function () {
		_guishExpBckg1()
	})
}
function ChangeSkin(a) {
	$.fn.jWindow.SetTheme(a)
}
function LoadWallpaper(a, b, c, d) {
	LoadingStart('Changing wallpaper ...<br />Please wait', 'Loading ...');
	var i = new Image();
	i.onload = function () {
		$('#main').css({
			'background-image': 'url(' + a + ')'
		});
		i = null;
		LoadingEnd('Wallpaper loaded!', 'Content loaded');
		if (a) $('#main').css('backgroundColor', b);
		if (c) $('#main').css('backgroundPosition', c);
		if (d) $('#main').css('backgroundRepeat', d);
		else $('#main').css('backgroundRepeat', 'no-repeat');
		$('#bckgexperiments').empty()
	};
	i.src = a;
	return false
}
function LoadingStart(a, b) {
	var c = document.createElement("div");
	$(c).jWindow({
		draggable: false,
		resizable: false,
		width: 200,
		height: 30,
		xPos: 0,
		yPos: 1
	});
	$(c).addClass("loading");
	$(c).find('div.titletext').html(b);
	$(c).find('.wintitle img').attr('src', 'css/images/loadingsmall.gif');
	$(c).find('div.container').css({
		'color': '#000'
	}).html(a);
	$(c).css({
		'position': 'relative',
		'display': 'block',
		'z-index': '6999',
		'vertical-align': 'bottom',
		width: '200',
		height: '30'
	});
	$(c).find('div.container').css({
		'overflow': 'hidden',
		'text-align': 'center',
		'display': 'block'
	});
	$(c).prependTo('#loadingcontainer')
}
function LoadingEnd(a, b, c, d) {
	var e = $('#loadingcontainer .loading:first');
	e.find('.wintitle img').attr('src', 'css/images/ajaxok.png');
	e.find('div.container').css({
		color: '#1c820c'
	}).html(a);
	e.find('div.titletext').html(b);
	var f = setTimeout(function () {
		e.animate({
			marginBottom: '-85px'
		},
		{
			queue: false
		},
		'slow');
		e.fadeOut('slow', function () {
			e.remove()
		});
		f = null
	},
	2000)
}
function CreateElement(a, p, t) {
	if (! ($('#' + a).length > 0)) {
		var b = document.createElement("div");
		$(b).attr("id", a).attr("title", t);
		$(b).css('display', 'none');
		$(b).appendTo('#' + p)
	}
}
function ShowElement(a, b, c) {
	var d = $('#' + a);
	d.animate({
		scaleX: 0.1,
		scaleY: 0.1
	},
	10, function () {
		d.css({
			display: 'block',
			opacity: 0.3
		});
		d.animate({
			opacity: 1,
			scaleX: 1.2,
			scaleY: 1.2
		},
		function () {
			$('#' + a + 'tbcont').css('display', 'block');
			LoadingEnd(b, c);
			if ($('#guishSpecials .go2d').is(':visible')) $('#guishSpecials .go2d').click();
			d.animate({
				scaleX: 1,
				scaleY: 1
			},
			function () {
				d.find('div.container').css('display', 'block')
			})
		})
	})
}
function WindowsRoundabout(a, b) {
	if (!a) a = 'tearDrop';
	var c = $('div.jwindow').size() - 1;
	var d = 0;
	$('div.jwindow').each(function (i) {
		if (!$(this).is(':visible')) {
			$('#' + $(this).attr('id') + 'tb').click()
		}
		d = i
	});
	if (d === c && d >= 2) {
		var e = setTimeout(function () {
			$('#main').roundabout({
				childSelector: '.jwindow',
				shape: a,
				performCenter: b
			})
		},
		800)
	}
}
function Unroundabout() {
	if ($('div.jwindow:eq(1)').attr('startpos')) {
		$('#main').removeClass('  roundabout-holder');
		var b = ['bearing', 'tilt', 'maxZ', 'minZ', 'minOpacity', 'maxOpacity', 'minScale', 'maxScale', 'duration', 'easing', 'clickToFocus', 'focusBearing', 'animating', 'childInFocus', 'shape', 'period', 'debug', 'childSelector', 'performCenter'];
		$.each(b, function (i, a) {
			$('#main').removeAttr(a)
		});
		$('div.jwindow').each(function () {
			if (!$(this).is(':visible')) {
				$('#' + $(this).attr('id') + 'tb').click()
			}
			if ($(this).attr('startpos')) {
				var a = $(this).attr('startPos').split(',');
				$(this).animate({
					'left': a[5] + 'px',
					'top': a[4] + 'px',
					'width': a[0] + 'px',
					'height': a[1] + 'px',
					'opacity': 1,
					'font-size': a[2] + 'px',
					scale: 1
				}).css('z-index', a[3]).removeClass('roundabout-moveable-item').removeClass('roundabout-in-focus').removeAttr('degrees').removeAttr('startpos').removeAttr('current-scale').find('div.winmask:first').css({
					display: 'none',
					cursor: 'move',
					opacity: 0.4
				}).unbind('click')
			}
		})
	}
}
function ShowDesktop() {
	$('div.jwindow').each(function () {
		if ($(this).is(':visible')) {
			$('#' + $(this).attr('id') + 'tb').click()
		}
	})
}
function CenterElement(a, b) {
	var c = $('#' + a);
	var d = ($('#main').height() - c.height()) / 2;
	var e = ($('#main').width() - c.width()) / 2;
	if (b) {
		c.animate({
			'left': e
		});
		if ($('#main').height() > c.height()) c.animate({
			'top': d
		});
		else c.animate({
			'top': 35
		})
	} else {
		c.css('left', e);
		if ($('#main').height() > c.height()) c.css('top', d);
		else c.css('top', 35)
	}
}
function ScrollTopBar() {
	var c = $('#topbarcont'),
	ul = $('#tcontainer'),
	ulPadding = 15;
	var d = c.width();
	c.css({
		overflow: 'hidden'
	});
	var f = ul.find('li:last-child');
	c.bind('mousemove', function (e) {
		var a = f[0].offsetLeft + f.outerWidth() + ulPadding;
		var b = (e.pageX - c.offset().left) * (a - d) / d;
		c.scrollLeft(b)
	})
}



$(document).ready(function () {
	//icon action
	var b = $(".icon");
	IconsLineUp('left');
	b.slideDown(1500);
	$('.icon').bind('click', function (a) {
		if ($('#startmenu').is(':visible')) $('#startmenu').toggle()
	}).bind('mousedown', function (a) {
		if ($('#startmenu').is(':visible')) $('#startmenu').toggle()
	}).bind('dragstart', function (a) {
		return $(this).css('opacity', .5).clone().addClass('active').insertAfter(this)
	}).bind('drag', function (a) {
		E = $(a.dragProxy);
		E.css({
			top: a.offsetY - E.parent().position().top,
			left: a.offsetX - E.parent().position().left
		});
		if (E.position().top < 0) E.css({
			top: 0
		});
		if (E.position().top > E.parent().height() - E.height()) E.css({
			top: E.parent().height() - E.height()
		});
		if (E.position().left < 0) E.css({
			left: 0
		});
		if (E.position().left > E.parent().width() - E.width()) E.css({
			left: E.parent().width() - E.width()
		})
	}).bind('dragend', function (a) {
		E = $(a.dragProxy);
		$(this).animate({
			top: E.position().top,
			left: E.position().left,
			opacity: 1
		});
		E.remove()
	});
	//tooltip
	$('.icon,#navigation div,.leftpane img,#guishSpecials .go3d, #wshaddowon').tooltip({
		track: true,
		delay: 1,
		showURL: false,
		showBody: " - ",
		fade: 250
	});
	//pulse icon text
	$('.icon').hover(
		function () {
			$(this).find('.name').pulse({
				speed: 600,
				backgroundColors: ['#fff', '#444']
			})
		},	function () {
				$(this).find('.name').recover()
		}
	);
	// TODO
	$('#loading').jWindow({
		width: 200,
		height: 30,
		draggable: false,
		resizable: false
	}).css({
		position: 'absolute',
		'left': '',
		'top': '',
		'right': '0px',
		'bottom': '30px',
		'display': 'none',
		'z-index': 6999
	}).find('div.container').css({
		'overflow': 'hidden',
		'text-align': 'center'
	});
	
	//main 
	$('#main').mousedown(function () {
		if ($('#startmenu').is(':visible')) $('#startmenu').toggle()
	});
		//JeeGoo context
	$('#main').jeegoocontext('menu_1', {
		widthOverflowOffset: 0,
		heightOverflowOffset: 3,
		submenuLeftOffset: -4,
		submenuTopOffset: -5,
		onSelect: function (e, a) {
			switch ($(this).attr('id')) {
			case 'align_right':
				IconsLineUp('right');
				break;
			case 'align_left':
				IconsLineUp('left');
				break;
			case 'style_italic':
				$('.icon').css('fontStyle', 'italic');
				break;
			case 'style_normal':
				$('.icon').css('fontStyle', 'normal');
				break;
			case 'style_arial':
				$('.icon').css({
					'fontFamily':
					'Arial',
					'fontSize': '100%'
				});
				break;
			case 'style_verdana':
				$('.icon').css({
					'fontFamily':
					'Verdana',
					'fontSize': '80%'
				});
				break;
			case 'style_courier':
				$('.icon').css({
					'fontFamily':
					'Courier New',
					'fontSize': '80%'
				});
				break;
			case 'style_tahoma':
				$('.icon').css('fontFamily', 'Tahoma');
				break;
			case 'style_color':
				StartFontColor();
				break;
			case 'system_settings':
				SetUpDesktop();
				break;
			case 'wshaddowon':
				$('.jwindow').css({
					'-moz-box-shadow':
					'0 0 16px #000000',
					'-webkit-box-shadow': '0 0 16px #000000',
					'box-shadow': '0 0 16px #000000'
				});
				$.fn.jWindow.shadow = true;
				break;
			case 'wshaddowoff':
				$('.jwindow').css({
					'-moz-box-shadow':
					'none',
					'-webkit-box-shadow': 'none',
					'box-shadow': 'none'
				});
				$.fn.jWindow.shadow = false;
				break;
			default:
				return false
			}
		}
	});

//TODO
	$('.leftpane img').hover(function () {
		$(this).css({
			'-moz-box-shadow':
			'0 0 8px #fff',
			'-webkit-box-shadow': '0 0 8px #fff',
			'box-shadow': '0 0 8px #fff',
			backgroundColor: '#fff'
		})
	},
	function () {
		$(this).css({
			'-moz-box-shadow': 'none',
			'-webkit-box-shadow': 'none',
			'box-shadow': 'none',
			backgroundColor: ''
		})
	});
	
	//start menu : left top
	$('#startmenu div.leftside a').hover(function () {
		$(this).find('img').pulse({
			speed: 300,
			opacityRange: [1, 0.4]
		})
	},
	function () {
		$(this).find('img').recover()
	}).bind('click', function () {
		$('#startmenu div.leftside a').removeClass('active');
		$(this).addClass('active')
	});
	$('.rscontainer a').hover(function () {
		$(this).stop().animate({
			letterSpacing: 3,
			fontSize: '8pt'
		},
		100).pulse({
			speed: 300,
			opacityRange: [1, 0.4]
		})
	},
	function () {
		$(this).recover();
		$(this).stop().animate({
			letterSpacing: 0,
			fontSize: '10pt'
		},
		100)
	});
		//TODO
	$('.winicon').live('mouseover', function () {
		$('.name', this).pulse({
			speed: 400,
			backgroundColors: ['#fff', '#aaa']
		})
	});
	$('.winicon').live('mouseout', function () {
		$('.name', this).recover()
	});

//TODO
	$(window).resize(function () {
		$('#topbarcont').css({
			'width': $(window).width() - (290 + $('#clock').width())
		})
	});
	$('#topbarcont').css({
		'width': $(window).width() - (290 + $('#clock').width())
	});
	
	jQuery.each(jQuery.browser, function (i) {
		if ($.browser.msie) {}
	});
/*
	$('#guishSpecials').bind('mouseleave', function () {
		$(this).animate({
			bottom: -417
		})
	});
	$('#guishSpecials .go3d').click(function () {
		ensure({
			js: "js/jquery.roundabout-1.0.js"
		},
		function () {
			if ($('#main div.jwindow').size() < 3) {
				$('#error3D').animate({
					left: -20
				},
				function () {
					var a = setTimeout(function () {
						$('#error3D').animate({
							left: -260
						});
						a = null
					},
					2000)
				})
			} else $('#guishSpecials').animate({
				bottom: 0
			})
		})
	});
	$('#guishSpecials .go2d').click(function () {
		Unroundabout();
		$(this).hide();
		$('#guishSpecials .go3d').show();
		$('#guishSpecials').bind('mouseenter', function () {
			$(this).animate({
				bottom: -417
			})
		})
	});
	$('#guishSpecials .threeDoption').click(function () {
		var a = $(this).attr('rel').split(',');
		$('#guishSpecials').animate({
			bottom: -417
		}).unbind('mouseleave');
		$('#guishSpecials .go3d').hide();
		$('#guishSpecials .go2d').show();
		WindowsRoundabout(a[0], a[1])
	}).hover(function () {
		$(this).pulse({
			speed: 400,
			backgroundColors: ['#fff', '#aaa'],
			textColors: ['#ff0000', '#4859ff', '#4859ff', '#73ff48', '#fff']
		})
	},
	function () {
		$(this).recover()
	});
	*/
	//widget drag and sort
	$("#widgetscontainer").dragsort({
		dragSelector: "li",
		dragSelectorExclude: "input, button, a[href], div.titletext, span.wdgclose",
		dragBetween: true,
		placeHolderTemplate: "<li class='placeHolder'><div></div></li>"
	});
	//LoadWallpaper("images/wallpapers/jDesktop.1.0.jpg", "#000000", "right bottom", "no-repeat")
});


//navigation at the bottom center like iMAC
$(function () {
	var d = 300;
	$('#navigation div.title').each(function () {
		$(this).stop().animate({
			'bottom': '-80px'
		},
		d += 350)
	});
	$('#navigation div.title').hover(function () {
		$(this).stop().animate({
			'bottom': '0px'
		},
		400);
		$('div', this).stop().animate({
			opacity: 0
		});
		$('img', this).stop().animate({
			opacity: 1
		})
	},
	function () {
		$(this).stop().animate({
			'bottom': '-80px'
		},
		400);
		$('div', this).stop().animate({
			opacity: 1
		});
		$('img', this).stop().stop().animate({
			opacity: 0
		})
	})
});

(function ($) {
	var c = [];
	$.preLoadImages = function () {
		var a = arguments.length;
		for (var i = a; i--;) {
			var b = document.createElement('img');
			b.src = arguments[i];
			c.push(b)
		}
	}
})(jQuery);
(function ($) {
	$('#main').css({'background-image': 'none'});
	$('#main').css({'background-color': '#639cd4'});
})(jQuery);

